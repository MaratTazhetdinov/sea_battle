# SEA_BATTLE

SeaBattle - многопользовательская игра морской бой.

# Содержание
* [Основные подходы разработки](#Основные-подходы-разработки)
* [UI](#UI)
* [Генерация моделей](#Генерация-моделей)

# Основные подходы разработки

> Подходы архитектуры описаны в статье https://medium.com/@kirsapps/my-vision-of-flutter-app-architecture-a80fd8824568

## Репозитории и модели данных

### Общий принцип

Получение данных осуществляется через репозитории и дата провайдеры.

Общая схема выглядит так

> блок -> репозиторий -> дата провайдер

Для репозиториев и дата провайдеров создается интерфейс (абстрактный класс) с заглавной I в названии (пример IShoppingCartRepository).

Блок общается с репозиторием, который предоставляет конечную модель необходимых данных и знает только про репозиторий.

Сам репозиторий может использовать дата провайдеры.

Дата провайдеры получают сырые данные и возвращают дто модель, основанную на этих данных.

## Обработка ошибок

Пока нет необходимости в обратном, действует общий принцип обработки ошибок на уровне блока, а именно никакие репозитории и дата провайдеры не содержат в себе конструкции try catch.

В блоке, все методы, которые теоретически и даже с очень маленькой долей вероятности могут закончиться ошибкой, выполняются внутри try catch.

Это касается и вызовов апи/методов в ui, например когда вызывается выбор файла из пакета и т.д.

Внутри catch происходит реакция на ошибку, а также обязательно передается событие в логгер с описанием того какая опрерация провалилась и указанием на блок и метод, в котором ошибка произошла.

## Локализация
Для получения локализации в проекте есть extension AppLocalizationsX над BuildContext.

Находится по пути lib/l10n/l10n.dart, для получения локализации нужно импортировать этот файл и вызвать геттер l10n -> context.l10n

## Роуты

В приложении используется пакет [auto_route](https://pub.dev/packages/auto_route).

* Если необходимо чтобы страница открывалась с боттом баром внизу (внутренняя навигация вкладок), то роуты нужно указывать в параметре children 5 роутов, которые используются как вкладки (пути discover, actions, search, chats_list, user).

  > Eсли нужно чтобы экран открывался в нескольких вкладках, то новый роут нужно добавить в children в каждую вкладку. Например, чтобы роут открылся во вкладках discover, actions, chats_list, вы в этих 3 роутах в параметре children указываете этот роут.

* Если нужно чтобы роут открывался на весь экран без боттом бара (без внутренней навигации вкладок), то вы указываете новый роут в параметре routes класса CustomAutoRouter. Так вы укажете верхнеуровневый роут.

**После указания новых роутов нужно запустить кодогенерацию.**

## Добавление зависимостей

Зависимости добавляются с точной версией без крышечки.

В алфавитном порядке.

## Именование стейтов и ивентов в блоке

Стейты и ивенты в блоке именуются в соответствии с [конвенцией](https://bloclibrary.dev/#/blocnamingconventions)

## Работа с enum

Если нужно определить какое значение enum содержит переменная, то используется switch case конструкция. Для enum она подходит лучше потому что при добавлении новых элементов места, где этот новый элемент не обрабатывается (в switch case конструкции), будут подсвечены.

# UI

## Тема
В проекте используется настроенная стандартная тема, находится в файле lib/ui_kit/theme/theme.dart.

При использовании стандартных виджетов, которые зависят от настроек темы, нужно вносить изменения в этом файле.

> Получение темы реализовано через геттер theme у BuildContext -> context.theme

## Цвета

файл с настройками цветов находтся по пути lib/ui_kit/colors/colors.dart.

В нем указаны цвета из дизайна.

> Получение цветов реализовано через геттер colors у ThemeData -> context.theme.colors

## Стили текста

Стили текста указаны в файле темы, находятся в параметре textTheme класса ThemeData.

Стили указаны в соответствии с дизайном.

## Animated Switcher

Для эффекта AnimatedSwitcher используется виджет AppAnimatedSwitcher.

## Верстка кнопок

Если элемент в дизайне похож на кнопку и должен реагировать на нажатия, то используется TextButton, OutlinedButton или ElevatedButton как основной виджет.

## Ввод текста с клавиатуры

Если на экране присутствуют поля ввода текста с клавиатуры, то весь экран нужно обернуть в виджет AppTapUnfocus, чтобы при тапе мимо поля фокус пропадал. Это нужно для более удобного скрытия клавиатуры.

# Генерация моделей

flutter pub run build_runner build --delete-conflicting-outputs